<script type="text/javascript">
  $(document).ready(function () {

//Check if the current URL contains '#'
    if (document.URL.indexOf("#") == -1) {
// Set the URL to whatever it was plus "#".
      url = document.URL + "#";
      location = "#";

//Reload the page
      location.reload(true);

    }
  });
</script>

<div class="container">
  <div class="row">

    <h1 class="center-align">Listing Teams</h1>

    <%= link_to 'New Team', new_team_path, class: "btn light-blue darken-1 right" %>

    <table class="collection striped highlight centered responsive-table">
      <thead>
      <tr>
        <th>Name</th>
        <th>Sport</th>
        <th></th>
      </tr>
      </thead>
      <tbody>

      <% identifier = 0 %>
      <% @teams.each do |team| %>
          <tr>
            <td><%= team.name %></td>
            <td><%= team.sport.name %></td>
            <td></td>

            <% identifier = identifier + 1 %>
            <!-- Modal Trigger -->
            <td><%= "<a class='waves-effect waves-light btn blue lighten-2 modal-trigger' href='#modal#{identifier} '>Show</a>".html_safe %></td>

            <!-- Modal Structure -->
            <%= "<div id='modal#{identifier}' class='modal'>".html_safe %>
            <div class="modal-content">
              <ul class="collection with-header">
                <li class="collection-header">
                  <h4>
                    Captain: <%= team.user.name %>
                  </h4>
                </li>
                <!-- Team Members  -->
                <li class="collection-item"><h5>Members:</h5></li>
                <% team.users.each do |member| %>
                    <% if member.id != current_user.id %>
                        <li class="collection-item">
                          <div class="center-align"><h5><%= member.name %></h5></div>
                          <% if current_user.id == team.user.id %>
                              <div class="center-align"><%= link_to '<i class="material-icons icon-white ">delete</i>'.html_safe, team, method: :delete, data: {confirm: 'Are you sure?'}, class: "btn red darken-1" %></div>
                          <% end %>
                        </li>
                    <% end %>
                <% end %>
              </ul>
            </div>
            <div class="modal-footer">
              <a class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
            <% if team.user.id == current_user.id %>
                <td><%= link_to 'Edit', edit_team_path(team), class: "btn blue lighten-2" %></td>
                <td><%= link_to '<i class="material-icons icon-white ">delete</i>'.html_safe, team, method: :delete, data: {confirm: 'Are you sure?'}, class: "btn red darken-1" %></td>
            <% else %>
                <td><%= link_to 'Leave', team, method: :delete, data: {confirm: 'Are you sure?'}, class: "btn red darken-1" %></td>
            <% end %>
          </tr>
      <% end %>
      </tbody>
    </table>
  </div>
  <br>

</div>